./bin/cryptogen generate --config=./crypto-config.yaml
  mkdir channel-artifacts


export FABRIC_CFG_PATH=$PWD
./bin/configtxgen -profile UPMOrgOrdererGenesis -outputBlock ./channel-artifacts/genesis.block

export CHANNEL_NAME=upmorgchannel
./bin/configtxgen -profile UPMOrgChannel -outputCreateChannelTx ./channel-artifacts/upmorgschannel.tx -channelID $CHANNEL_NAME
./bin/configtxgen -profile UPMOrgChannel -outputAnchorPeersUpdate ./channel-artifacts/upmmspanchors.tx -channelID $CHANNEL_NAME -asOrg UpmMSP
./bin/configtxgen -profile UPMOrgChannel -outputAnchorPeersUpdate ./channel-artifacts/dhlmspanchors.tx -channelID $CHANNEL_NAME -asOrg DhlMSP
./bin/configtxgen -profile UPMOrgChannel -outputAnchorPeersUpdate ./channel-artifacts/finportmspanchors.tx -channelID $CHANNEL_NAME -asOrg FinportMSP

export home_directory=/home/malkakam/hyperledger/UPMS-Docker-project

docker-compose -f docker-compose-cli.yaml -f docker-compose-couch.yaml up -d 

##ckeck##
docker ps -a

docker exec -it cli bash

CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/upm.tietonetworks.com/users/Admin@upm.tietonetworks.com/msp

CORE_PEER_LOCALMSPID="UpmMSP"

CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/upm.tietonetworks.com/peers/peer1.upm.tietonetworks.com/tls/ca.crt

CORE_PEER_TLS_ENABLED=true

CORE_PEER_ADDRESS=peer1.upm.tietonetworks.com:7051

CORE_PEER_CHAINCODELISTENADDRESS=peer1.upm.tietonetworks.com:7052

export CHANNEL_NAME=upmorgchannel

export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/tietonetworks.com/orderers/orderer.tietonetworks.com/msp/tlscacerts/tlsca.tietonetworks.com-cert.pem

export CC_SRC_PATH="github.com/chaincode/doctor"


################Only in case of new channel creation############### 
peer channel create -c $CHANNEL_NAME -f ./channel-artifacts/upmorgschannel.tx -o orderer.tietonetworks.com:7050 --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA

peer channel join -b $CHANNEL_NAME.block

peer channel update -o orderer.tietonetworks.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/upmmspanchors.tx --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA
################Only in case of new channel creation###############

#peer chaincode install -n sample -v 1 -p /github.com/chaincode/

export CC_SRC_PATH="github.com/chaincode/doctor"

peer chaincode install -n doctors_chain -v 8.3 -l golang -p  ${CC_SRC_PATH}

peer chaincode list -C upmorgchannel --instantiated 

export CHANNEL_NAME=upmorgchannel

peer chaincode instantiate -o orderer.tietonetworks.com:7050 --tls --cafile $ORDERER_CA -C $CHANNEL_NAME -n doctors_chain -l golang -v 7 -c '{"Args":["init","Ajit Shah","1","test@gmail.com","9860606060","Aundh"]}' -P "OR('UpmMSP.peer','DhlMSP.peer','FinportMSP.peer')"

peer chaincode upgrade -o orderer.tietonetworks.com:7050 --tls --cafile $ORDERER_CA -C $CHANNEL_NAME -n doctors_chain -l golang -v 8.3 -c '{"Args":["init","Ajit Shah","1","test@gmail.com","9860606060","Aundh"]}' -P "OR('UpmMSP.peer','DhlMSP.peer','FinportMSP.peer')"

peer chaincode instantiate -o orderer.tietonetworks.com:7050 --tls --cafile $ORDERER_CA -C $CHANNEL_NAME -n sample -l golang -v 0 -c '{"Args":["init","a", "100", "b","200"]}' -P "OR('UpmMSP.peer','DhlMSP.peer','FinportMSP.peer')"


peer chaincode invoke -o orderer.tietonetworks.com:7050 --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA -C $CHANNEL_NAME -n doctors_chain -c '{"Args":["CreateDoctor","Komal Sharma","2","tested@gmail.com","9860606060","Aundh"]}'

peer chaincode invoke -o orderer.tietonetworks.com:7050 --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA -C $CHANNEL_NAME -n doctors_chain -c '{"Args":["GetDoctorByID","1"]}'

to check the couchdb on the
http://localhost:5984/_utils/

curl -s -X POST \
  http://localhost:4000/fabric/chaincodes/invoke/createconsignment \
-H "content-type: application/json" \
  -d '{
"channelName":"upmorgschannel","peerKey":"peer0","chaincodeVersion":"2","peerOrgId":"upm","chaincodeName":"sample1","initFuncArgs":["1","U01","C01","new","Mumbai","10","Iran"]
}'
 
https://chainhero.io/2018/03/tutorial-build-blockchain-app-2/

https://books.google.co.in/books?id=wKdhDwAAQBAJ&pg=PA175&lpg=PA175&dq=how+to+call+hyperledger+go+chaincode+function+using+curl&source=bl&ots=5hGjE5jms0&sig=38kipX1GmgIgSaI5LR6UFVKyb3Q&hl=en&sa=X&ved=2ahUKEwiz7JiL0OXcAhUbXSsKHbHpBDo4ChDoATAHegQIAxAB#v=onepage&q=how%20to%20call%20hyperledger%20go%20chaincode%20function%20using%20curl&f=false


 
curl -s -X POST \
  http://localhost:4000/fabric/chaincodes/invoke/query \
-H "content-type: application/json" \
  -d '{
"channelName":"publicchannel","peerKey":"peer1","chaincodeVersion":"v1","peerOrgId":"upm","chaincodeName":"sample1","initFuncArgs":["b"]
}'

